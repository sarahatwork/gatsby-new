{"version":3,"sources":["../../src/utils/webpack.config.js"],"names":["require","store","debug","WebpackMD5Hash","ChunkManifestPlugin","GatsbyModulePlugin","genBabelConfig","withBasePath","HashedChunkIdsPlugin","extractDevelopHtml","extractBuildHtml","allChunks","extractBuildCss","extractBuildJavascript","module","exports","program","directory","suppliedStage","webpackPort","pages","directoryPath","stage","babelConfig","processEnv","defaultNodeEnv","env","process","NODE_ENV","envFile","join","cwd","parsed","parse","readFileSync","encoding","e","code","console","log","envObject","Object","keys","reduce","acc","key","JSON","stringify","gatsbyVarObject","match","PUBLIC_DIR","assign","output","path","filename","publicPath","host","devtoolModuleFilenameTemplate","info","resolve","absoluteResourcePath","replace","prefixPaths","getState","config","pathPrefix","libraryTarget","chunkFilename","Error","entry","commons","main","app","plugins","optimize","OccurenceOrderPlugin","HotModuleReplacementPlugin","NoErrorsPlugin","DefinePlugin","__PREFIX_PATHS__","__PATH_PREFIX__","__POLYFILL__","polyfill","NamedModulesPlugin","clearConsole","paths","components","map","page","componentChunkName","IgnorePlugin","CommonsChunkPlugin","name","chunks","minChunks","count","vendorModuleList","isFramework","vendor","regex","RegExp","test","resource","manifestVariable","UglifyJsPlugin","compress","screw_ie8","warnings","mangle","comments","extensions","modulesDirectories","devtool","loader","exclude","query","loaders","limit","merge","postcss","wp","addDependencyTo","browsers","browserslist","extract","resolveLoader","root","userLoaderDirectoryPath","statSync","isDirectory","push","__dirname","context","node","__filename","target","profile","validatedConfig"],"mappings":"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","file":"webpack.config.js","sourcesContent":["require(`v8-compile-cache`)\n\nimport { uniq, some } from \"lodash\"\nimport fs from \"fs\"\nimport path from \"path\"\nimport webpack from \"webpack\"\nimport dotenv from \"dotenv\"\nimport Config from \"webpack-configurator\"\nimport ExtractTextPlugin from \"extract-text-webpack-plugin\"\nimport StaticSiteGeneratorPlugin from \"static-site-generator-webpack-plugin\"\nimport { StatsWriterPlugin } from \"webpack-stats-plugin\"\nimport FriendlyErrorsWebpackPlugin from \"friendly-errors-webpack-plugin\"\nimport { cssModulesConfig } from \"gatsby-1-config-css-modules\"\n\n// This isn't working right it seems.\n// import WebpackStableModuleIdAndHash from 'webpack-stable-module-id-and-hash'\nimport webpackModifyValidate from \"./webpack-modify-validate\"\n\nconst { store } = require(`../redux`)\nconst debug = require(`debug`)(`gatsby:webpack-config`)\nconst WebpackMD5Hash = require(`webpack-md5-hash`)\nconst ChunkManifestPlugin = require(`chunk-manifest-webpack-plugin`)\nconst GatsbyModulePlugin = require(`gatsby-module-loader/plugin`)\nconst genBabelConfig = require(`./babel-config`)\nconst { withBasePath } = require(`./path`)\nconst HashedChunkIdsPlugin = require(`./hashed-chunk-ids-plugin`)\n\n// Use separate extract-text-webpack-plugin instances for each stage per the docs\nconst extractDevelopHtml = new ExtractTextPlugin(`build-html-styles.css`)\nconst extractBuildHtml = new ExtractTextPlugin(`build-html-styles.css`, {\n  allChunks: true,\n})\nconst extractBuildCss = new ExtractTextPlugin(`styles.css`, { allChunks: true })\nconst extractBuildJavascript = new ExtractTextPlugin(`build-js-styles.css`, {\n  allChunks: true,\n})\n\n// Five stages or modes:\n//   1) develop: for `gatsby develop` command, hot reload and CSS injection into page\n//   2) develop-html: same as develop without react-hmre in the babel config for html renderer\n//   3) build-css: build styles.css file\n//   4) build-html: build all HTML files\n//   5) build-javascript: Build js chunks for Single Page App in production\n\nmodule.exports = async (\n  program,\n  directory,\n  suppliedStage,\n  webpackPort = 1500,\n  pages = []\n) => {\n  const directoryPath = withBasePath(directory)\n\n  // We combine develop & develop-html stages for purposes of generating the\n  // webpack config.\n  const stage = suppliedStage\n  const babelConfig = await genBabelConfig(program, suppliedStage)\n\n  function processEnv(stage, defaultNodeEnv) {\n    debug(`Building env for \"${stage}\"`)\n    const env = process.env.NODE_ENV\n      ? process.env.NODE_ENV\n      : `${defaultNodeEnv}`\n    const envFile = path.join(process.cwd(), `./.env.${env}`)\n    let parsed = {}\n    try {\n      parsed = dotenv.parse(fs.readFileSync(envFile, { encoding: `utf8` }))\n    } catch (e) {\n      if (e && e.code !== `ENOENT`) {\n        console.log(e)\n      }\n    }\n    const envObject = Object.keys(parsed).reduce((acc, key) => {\n      acc[key] = JSON.stringify(parsed[key])\n      return acc\n    }, {})\n\n    const gatsbyVarObject = Object.keys(process.env).reduce((acc, key) => {\n      if (key.match(/^GATSBY_/)) {\n        acc[key] = JSON.stringify(process.env[key])\n      }\n      return acc\n    }, {})\n\n    // Don't allow overwriting of NODE_ENV, PUBLIC_DIR as to not break gatsby things\n    envObject.NODE_ENV = JSON.stringify(env)\n    envObject.PUBLIC_DIR = JSON.stringify(`${process.cwd()}/public`)\n\n    return Object.assign(envObject, gatsbyVarObject)\n  }\n\n  debug(`Loading webpack config for stage \"${stage}\"`)\n  function output() {\n    switch (stage) {\n      case `develop`:\n        return {\n          path: directory,\n          filename: `[name].js`,\n          publicPath: `http://${program.host}:${webpackPort}/`,\n          devtoolModuleFilenameTemplate: info =>\n            path.resolve(info.absoluteResourcePath).replace(/\\\\/g, `/`),\n        }\n      case `build-css`:\n        // Webpack will always generate a resultant javascript file.\n        // But we don't want it for this step. Deleted by build-css.js.\n        return {\n          path: directoryPath(`public`),\n          filename: `bundle-for-css.js`,\n          publicPath: program.prefixPaths\n            ? `${store.getState().config.pathPrefix}/`\n            : `/`,\n        }\n      case `build-html`:\n      case `develop-html`:\n        // A temp file required by static-site-generator-plugin. See plugins() below.\n        // Deleted by build-html.js, since it's not needed for production.\n        return {\n          path: directoryPath(`public`),\n          filename: `render-page.js`,\n          libraryTarget: `umd`,\n          publicPath: program.prefixPaths\n            ? `${store.getState().config.pathPrefix}/`\n            : `/`,\n        }\n      case `build-javascript`:\n        return {\n          filename: `[name]-[chunkhash].js`,\n          chunkFilename: `[name]-[chunkhash].js`,\n          path: directoryPath(`public`),\n          publicPath: program.prefixPaths\n            ? `${store.getState().config.pathPrefix}/`\n            : `/`,\n        }\n      default:\n        throw new Error(`The state requested ${stage} doesn't exist.`)\n    }\n  }\n\n  function entry() {\n    switch (stage) {\n      case `develop`:\n        return {\n          commons: [\n            require.resolve(`react-hot-loader/patch`),\n            `${require.resolve(`webpack-hot-middleware/client`)}?path=http://${\n              program.host\n            }:${webpackPort}/__webpack_hmr&reload=true&overlay=false`,\n            directoryPath(`.cache/app`),\n          ],\n        }\n      case `develop-html`:\n        return {\n          main: directoryPath(`.cache/develop-static-entry`),\n        }\n      case `build-css`:\n        return {\n          main: directoryPath(`.cache/app`),\n        }\n      case `build-html`:\n        return {\n          main: directoryPath(`.cache/static-entry`),\n        }\n      case `build-javascript`:\n        return {\n          app: directoryPath(`.cache/production-app`),\n        }\n      default:\n        throw new Error(`The state requested ${stage} doesn't exist.`)\n    }\n  }\n\n  function plugins() {\n    switch (stage) {\n      case `develop`:\n        return [\n          new webpack.optimize.OccurenceOrderPlugin(),\n          new webpack.HotModuleReplacementPlugin(),\n          new webpack.NoErrorsPlugin(),\n          new webpack.DefinePlugin({\n            \"process.env\": processEnv(stage, `development`),\n            __PREFIX_PATHS__: program.prefixPaths,\n            __PATH_PREFIX__: JSON.stringify(store.getState().config.pathPrefix),\n            __POLYFILL__: store.getState().config.polyfill,\n          }),\n          // Names module ids with their filepath. We use this in development\n          // to make it easier to see what modules have hot reloaded, etc. as\n          // the numerical IDs aren't useful. In production we use numerical module\n          // ids to reduce filesize.\n          new webpack.NamedModulesPlugin(),\n          new FriendlyErrorsWebpackPlugin({\n            clearConsole: false,\n            // compilationSuccessInfo: {\n            // messages: [\n            // `You can now view your site in the browser running at http://${program.host}:${program.port}`,\n            // `Your graphql debugger is running at http://${program.host}:${program.port}/___graphql`,\n            // ],\n            // },\n          }),\n        ]\n      case `develop-html`:\n        return [\n          new StaticSiteGeneratorPlugin({\n            entry: `render-page.js`,\n            paths: pages,\n          }),\n          new webpack.DefinePlugin({\n            \"process.env\": processEnv(stage, `development`),\n            __PREFIX_PATHS__: program.prefixPaths,\n            __PATH_PREFIX__: JSON.stringify(store.getState().config.pathPrefix),\n            __POLYFILL__: store.getState().config.polyfill,\n          }),\n          extractDevelopHtml,\n        ]\n      case `build-css`:\n        return [\n          new webpack.DefinePlugin({\n            \"process.env\": processEnv(stage, `production`),\n            __PREFIX_PATHS__: program.prefixPaths,\n            __PATH_PREFIX__: JSON.stringify(store.getState().config.pathPrefix),\n            __POLYFILL__: store.getState().config.polyfill,\n          }),\n          extractBuildCss,\n        ]\n      case `build-html`:\n        return [\n          new StaticSiteGeneratorPlugin({\n            entry: `render-page.js`,\n            paths: pages,\n          }),\n          new webpack.DefinePlugin({\n            \"process.env\": processEnv(stage, `production`),\n            __PREFIX_PATHS__: program.prefixPaths,\n            __PATH_PREFIX__: JSON.stringify(store.getState().config.pathPrefix),\n            __POLYFILL__: store.getState().config.polyfill,\n          }),\n          extractBuildHtml,\n        ]\n      case `build-javascript`: {\n        // Get array of page template component names.\n        let components = store\n          .getState()\n          .pages.map(page => page.componentChunkName)\n        components = uniq(components)\n        return [\n          // Moment.js includes 100s of KBs of extra localization data by\n          // default in Webpack that most sites don't want. This line disables\n          // loading locale modules. This is a practical solution that requires\n          // the user to opt into importing specific locales.\n          // https://github.com/jmblog/how-to-optimize-momentjs-with-webpack\n          new webpack.IgnorePlugin(/^\\.\\/locale$/, /moment$/),\n          new WebpackMD5Hash(),\n          // new webpack.optimize.DedupePlugin(),\n          // Extract \"commons\" chunk from the app entry and all\n          // page components.\n          new webpack.optimize.CommonsChunkPlugin({\n            name: `commons`,\n            chunks: [`app`, ...components],\n            // The more page components there are, the higher we raise the bar\n            // for merging in page-specific JS libs into the commons chunk. The\n            // two principles here is a) keep the TTI (time to interaction) as\n            // low as possible so that means keeping commons.js small with\n            // critical framework code (e.g. React/react-router) and b) is we\n            // want to push JS parse/eval work as close as possible to when\n            // it's used. Since most people don't navigate to most pages, take\n            // tradeoff of loading/evaling modules multiple times over\n            // loading/evaling lots of unused code on the initial opening of\n            // the app.\n            minChunks: (module, count) => {\n              const vendorModuleList = [\n                `react`,\n                `react-dom`,\n                `fbjs`,\n                `react-router`,\n                `react-router-dom`,\n                `gatsby-react-router-scroll`,\n                `dom-helpers`, // Used in gatsby-react-router-scroll\n                `path-to-regexp`,\n                `isarray`, // Used by path-to-regexp.\n                `scroll-behavior`,\n                `history`,\n                `resolve-pathname`, // Used by history.\n                `value-equal`, // Used by history.\n                `invariant`, // Used by history.\n                `warning`, // Used by history.\n                `babel-runtime`, // Used by history.\n                `core-js`, // Used by history.\n                `loose-envify`, // Used by history.\n                `prop-types`,\n                `gatsby-link`,\n              ]\n              const isFramework = some(\n                vendorModuleList.map(vendor => {\n                  const regex = new RegExp(`/node_modules/${vendor}/.*`, `i`)\n                  return regex.test(module.resource)\n                })\n              )\n              return isFramework || count > 3\n            },\n          }),\n          // Add a few global variables. Set NODE_ENV to production (enables\n          // optimizations for React) and whether prefixing links is enabled\n          // (__PREFIX_PATHS__) and what the link prefix is (__PATH_PREFIX__).\n          new webpack.DefinePlugin({\n            \"process.env\": processEnv(stage, `production`),\n            __PREFIX_PATHS__: program.prefixPaths,\n            __PATH_PREFIX__: JSON.stringify(store.getState().config.pathPrefix),\n            __POLYFILL__: store.getState().config.polyfill,\n          }),\n          // Extract CSS so it doesn't get added to JS bundles.\n          extractBuildJavascript,\n          // Write out mapping between chunk names and their hashed names. We use\n          // this to add the needed javascript files to each HTML page.\n          new StatsWriterPlugin(),\n          // Extract the webpack chunk manifest out of commons.js so commons.js\n          // doesn't get changed everytime you build. This increases the cache-hit\n          // rate for commons.js.\n          new ChunkManifestPlugin({\n            filename: `chunk-manifest.json`,\n            manifestVariable: `webpackManifest`,\n          }),\n          // Minify Javascript.\n          new webpack.optimize.UglifyJsPlugin({\n            compress: {\n              screw_ie8: true, // React doesn't support IE8\n              warnings: false,\n            },\n            mangle: {\n              screw_ie8: true,\n            },\n            output: {\n              comments: false,\n              screw_ie8: true,\n            },\n          }),\n          // Ensure module order stays the same. Supposibly fixed in webpack 2.0.\n          new webpack.optimize.OccurenceOrderPlugin(),\n          new GatsbyModulePlugin(),\n          // new WebpackStableModuleIdAndHash({ seed: 9, hashSize: 47 }),\n          new HashedChunkIdsPlugin(),\n        ]\n      }\n      default:\n        throw new Error(`The state requested ${stage} doesn't exist.`)\n    }\n  }\n\n  function resolve() {\n    const { program } = store.getState()\n    return {\n      // Use the program's extension list (generated via the\n      // 'resolvableExtensions' API hook).\n      extensions: [``, ...program.extensions],\n      // Default to using the site's node_modules directory to look for\n      // modules. But also make it possible to install modules within the src\n      // directory if you need to install a specific version of a module for a\n      // part of your site.\n      modulesDirectories: [\n        `node_modules`,\n        directoryPath(`node_modules`),\n        directoryPath(`node_modules`, `gatsby`, `node_modules`),\n      ],\n    }\n  }\n\n  function devtool() {\n    switch (stage) {\n      case `develop`:\n        return `cheap-module-source-map`\n      // use a normal `source-map` for the html phases since\n      // it gives better line and column numbers\n      case `develop-html`:\n      case `build-html`:\n      case `build-javascript`:\n        return `source-map`\n      default:\n        return false\n    }\n  }\n\n  function module(config) {\n    // Common config for every env.\n    config.loader(`js`, {\n      test: /\\.jsx?$/, // Accept either .js or .jsx files.\n      exclude: [/(node_modules|bower_components)/],\n      loader: `babel`,\n      query: babelConfig,\n    })\n    config.loader(`json`, {\n      test: /\\.json$/,\n      loaders: [`json`],\n    })\n    config.loader(`yaml`, {\n      test: /\\.ya?ml/,\n      loaders: [`json`, `yaml`],\n    })\n\n    // \"file\" loader makes sure those assets end up in the `public` folder.\n    // When you `import` an asset, you get its filename.\n    config.loader(`file-loader`, {\n      test: /\\.(ico|eot|otf|webp|pdf|ttf|woff(2)?)(\\?.*)?$/,\n      loader: `file`,\n      query: {\n        name: `static/[name].[hash:8].[ext]`,\n      },\n    })\n    // \"url\" loader works just like \"file\" loader but it also embeds\n    // assets smaller than specified size as data URLs to avoid requests.\n    config.loader(`url-loader`, {\n      test: /\\.(svg|jpg|jpeg|png|gif|mp4|webm|wav|mp3|m4a|aac|oga)(\\?.*)?$/,\n      loader: `url`,\n      query: {\n        limit: 10000,\n        name: `static/[name].[hash:8].[ext]`,\n      },\n    })\n\n    switch (stage) {\n      case `develop`:\n        config.loader(`css`, {\n          test: /\\.css$/,\n          exclude: [/\\.module\\.css$/],\n          loaders: [`style`, `css`, `postcss`],\n        })\n\n        // CSS modules\n        config.loader(`cssModules`, {\n          test: /\\.module\\.css$/,\n          loaders: [`style`, cssModulesConfig(stage), `postcss`],\n        })\n\n        config.merge({\n          postcss(wp) {\n            return [\n              require(`postcss-import`)({ addDependencyTo: wp }),\n              require(`postcss-cssnext`)({ browsers: program.browserslist }),\n              require(`postcss-browser-reporter`),\n              require(`postcss-reporter`),\n            ]\n          },\n        })\n        return config\n\n      case `build-css`:\n        config.loader(`css`, {\n          test: /\\.css$/,\n          exclude: [/\\.module\\.css$/],\n          loader: extractBuildCss.extract([`css?minimize`, `postcss`]),\n        })\n\n        // CSS modules\n        config.loader(`cssModules`, {\n          test: /\\.module\\.css$/,\n          loader: extractBuildCss.extract(`style`, [\n            cssModulesConfig(stage),\n            `postcss`,\n          ]),\n        })\n        config.merge({\n          postcss: [\n            require(`postcss-import`)(),\n            require(`postcss-cssnext`)({\n              browsers: program.browserslist,\n            }),\n          ],\n        })\n        return config\n\n      case `build-html`:\n      case `develop-html`:\n        // We don't deal with CSS at all when building the HTML.\n        // The 'null' loader is used to prevent 'module not found' errors.\n        // On the other hand CSS modules loaders are necessary.\n\n        config.loader(`css`, {\n          test: /\\.css$/,\n          exclude: [/\\.module\\.css$/],\n          loader: `null`,\n        })\n\n        // CSS modules\n        config.loader(`cssModules`, {\n          test: /\\.module\\.css$/,\n          loader: (stage === `build-html`\n            ? extractBuildHtml\n            : extractDevelopHtml\n          ).extract(`style`, [cssModulesConfig(stage), `postcss`]),\n        })\n\n        return config\n\n      case `build-javascript`:\n        // we don't deal with css at all when building the javascript.  but\n        // still need to process the css so offline-plugin knows about the\n        // various assets referenced in your css.\n        //\n        // It's also necessary to process CSS Modules so your JS knows the\n        // classNames to use.\n\n        config.loader(`css`, {\n          test: /\\.css$/,\n          exclude: [/\\.module\\.css$/],\n          // loader: `null`,\n          loader: extractBuildJavascript.extract([`css`]),\n        })\n\n        // CSS modules\n        config.loader(`cssModules`, {\n          test: /\\.module\\.css$/,\n          loader: extractBuildJavascript.extract(`style`, [\n            cssModulesConfig(stage),\n            `postcss`,\n          ]),\n        })\n\n        return config\n\n      default:\n        return config\n    }\n  }\n\n  function resolveLoader() {\n    const root = [path.resolve(directory, `node_modules`)]\n\n    const userLoaderDirectoryPath = path.resolve(directory, `loaders`)\n\n    try {\n      if (fs.statSync(userLoaderDirectoryPath).isDirectory()) {\n        root.push(userLoaderDirectoryPath)\n      }\n    } catch (e) {\n      if (e && e.code !== `ENOENT`) {\n        console.log(e)\n      }\n    }\n\n    return {\n      root,\n      modulesDirectories: [path.join(__dirname, `../loaders`), `node_modules`],\n    }\n  }\n\n  const config = new Config()\n\n  config.merge({\n    // Context is the base directory for resolving the entry option.\n    context: directory,\n    node: {\n      __filename: true,\n    },\n    entry: entry(),\n    debug: true,\n    // Certain \"isomorphic\" packages have different entry points for browser\n    // and server (see\n    // https://github.com/defunctzombie/package-browser-field-spec); setting\n    // the target tells webpack which file to include, ie. browser vs main.\n    target: stage === `build-html` || stage === `develop-html` ? `node` : `web`,\n    profile: stage === `production`,\n    devtool: devtool(),\n    output: output(),\n    resolveLoader: resolveLoader(),\n    plugins: plugins(),\n    resolve: resolve(),\n  })\n\n  module(config, stage)\n\n  // Use the suppliedStage again to let plugins distinguish between\n  // server rendering the html.js and the frontend development config.\n  const validatedConfig = await webpackModifyValidate(\n    program,\n    config,\n    babelConfig,\n    suppliedStage\n  )\n\n  return validatedConfig\n}\n"]}